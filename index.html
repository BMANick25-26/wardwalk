<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <title>Ward Walk Guide for BMA Reps</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A practical ward walk guide for BMA reps: prep, during, post, Pizza & Pay, useful links, and WhatsApp support.">
  <link rel="stylesheet" href="style.css?v=20">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0b0d12">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
  <base href="./">
  <link rel="apple-touch-icon" href="images/icon-192.png">
</head>

<body>
  <header class="header">
    <div class="container header-inner">
      <div class="brand">
        <img src="icon-512.png" alt="BMA Residents Ward Walk Logo" class="logo-image">
        <div>
          <strong>Ward Walk Guide</strong><br>
          <span class="muted">For BMA reps</span>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1>BMA Residents ward walking app</h1>
      <p class="lead">
        A practical guide you can use on shift.
        Prep, delivery, follow-up, and Pizza &amp; Pay.
      </p>

      <div class="callout">
        Keep it simple. You are there to inform, agitate, innoculate listen and connect people to support.<br>
        Remember: you do not need to be able to answer every question, if unsure please direct to the employment advice form, use useful the links, or ask regional reps for further advice
      </div>

      <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
          id="tab-help" data-src="pages/help.html" data-tab="help">WhatsApp regional reps for help</button>

        <a href="pages/employment-advice.html" class="btn secondary" target="_blank" rel="noopener">
          BMA employment advice form
        </a>

        <a href="pages/request-ballot.html" class="btn secondary" target="_blank" rel="noopener">
          Request a new ballot
        </a>

        <a href="https://forms.office.com/e/f6R13drPGm" class="btn secondary" target="_blank" rel="noopener">
          Record your ward walk
        </a>
      </div>
    </section>

    <!-- Tabs section -->
    <section class="tabs-wrap" aria-label="Ward walk pages">
      <!-- Top-level tabs -->
      <div class="tabs" role="tablist" aria-label="Ward walk tabs">
        
         <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
          id="tab-headlines" data-src="pages/headlines.html" data-tab="faqs">Headlines</button>
        
        <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
          id="tab-faqs" data-src="pages/faqs.html" data-tab="faqs">FAQs</button>

        <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
          id="tab-visuals" data-src="pages/visuals.html" data-tab="visuals">Visuals</button>

        <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
          id="tab-links" data-src="pages/links.html" data-tab="links">Useful links</button>

        <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
          id="tab-help" data-src="pages/help.html" data-tab="help">Help</button>

      </div>

      <!-- How-to section -->
      <div class="tab-group-section">
        <h3 class="tab-group-heading">How to do a ward walk</h3>

        <div class="tabs" role="tablist" aria-label="How to do a ward walk tabs">
          <button class="tab-btn active" type="button" role="tab" aria-selected="true" aria-controls="tabPanel"
            id="tab-what" data-src="pages/what.html" data-tab="what">What is a ward walk</button>

          <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
            id="tab-prep" data-src="pages/prep.html" data-tab="prep">How to prep</button>

          <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
            id="tab-during" data-src="pages/during.html" data-tab="during">What to do during</button>

          <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
            id="tab-after" data-src="pages/after.html" data-tab="after">What to do after</button>

          <button class="tab-btn" type="button" role="tab" aria-selected="false" aria-controls="tabPanel"
            id="tab-pizza" data-src="pages/pizza.html" data-tab="pizza">Pizza and Pay</button>
        </div>
      </div>

      <!-- Single panel (force full size even if CSS is wrong) -->
      <div class="tab-panel" id="tabPanel">
        <iframe
          id="tabFrame"
          class="tab-frame"
          title="Ward walk content"
          src="pages/what.html?v=19"
          loading="eager"
          style="width:100%; height:75vh; border:0; display:block;"
        ></iframe>
      </div>
    </section>

    <!-- Tabs logic -->
    <script>
  (function () {
    const tabsWrap = document.querySelector('.tabs-wrap');
    if (!tabsWrap) return;

    const buttons = Array.from(tabsWrap.querySelectorAll('.tab-btn'));
    const frame = document.getElementById('tabFrame');
    const panel = document.getElementById('tabPanel');
    if (!buttons.length || !frame || !panel) return;

    const VERSION = '19'; // keep in sync with style.css?v=19

    function withBust(url) {
      try {
        const u = new URL(url, window.location.href);
        u.searchParams.set('v', VERSION);
        return u.pathname + u.search + u.hash;
      } catch (e) {
        // Fallback for odd strings
        return url.includes('?') ? `${url}&v=${VERSION}` : `${url}?v=${VERSION}`;
      }
    }

    function setActive(btn, setFocus) {
      buttons.forEach(b => {
        const isActive = b === btn;
        b.classList.toggle('active', isActive);
        b.setAttribute('aria-selected', isActive ? 'true' : 'false');
        b.tabIndex = isActive ? 0 : -1;
      });

      const raw = btn.getAttribute('data-src');
      if (raw) {
        const next = withBust(raw);
        // Only update if different to avoid useless reloads
        if (frame.getAttribute('src') !== next) {
          frame.setAttribute('src', next);
        }
      }

      panel.setAttribute('aria-labelledby', btn.id);
      if (setFocus) btn.focus({ preventScroll: true });
    }

    // Initial
    const initial = buttons.find(b => b.classList.contains('active')) || buttons[0];
    buttons.forEach(b => (b.tabIndex = -1));
    initial.tabIndex = 0;
    setActive(initial, false);

    // Click + keyboard nav
    buttons.forEach(btn => {
      btn.addEventListener('click', () => setActive(btn, true));

      btn.addEventListener('keydown', (e) => {
        const i = buttons.indexOf(btn);
        if (i === -1) return;

        let nextIndex = null;
        if (e.key === 'ArrowRight' || e.key === 'ArrowDown') nextIndex = (i + 1) % buttons.length;
        if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') nextIndex = (i - 1 + buttons.length) % buttons.length;
        if (e.key === 'Home') nextIndex = 0;
        if (e.key === 'End') nextIndex = buttons.length - 1;
        if (nextIndex === null) return;

        e.preventDefault();
        setActive(buttons[nextIndex], true);
      });
    });

    // Region select (if present inside iframe pages, this won't run here â€” this is just defensive)
    // If you want region filtering, it must live in the iframe page (pages/help.html) or script.js.
  })();
</script>

  </main>

  <footer class="footer">
    <div class="footer-contact">
      <h3>Contact Nick for issues</h3>

      <div class="footer-buttons">
        <a
          href="https://wa.me/447736800871?text=Hi%20Nick%2C%20I%27ve%20found%20an%20issue%20with%20the%20ward%20walk%20site."
          target="_blank"
          rel="noopener"
          class="btn emergency"
        >
          WhatsApp Nick
        </a>

        <a href="mailto:ndalmon@bma.org.uk" class="btn secondary">
          Email Nick
        </a>
      </div>
    </div>

    <p class="muted" style="margin-top:16px;">
      Practical internal guide for BMA reps.
    </p>
  </footer>

  <script src="script.js" defer></script>
  <script defer>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js");
      });
    }
  </script>
</body>
</html>
